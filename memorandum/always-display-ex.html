<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="./fullScSlider/fullScSlider.js"></script>
  <script>
    var pages = [
      {
        "url"      : "https://script.google.com/macros/s/AKfycbxOBOfpSsnApd0GMwPm2xCLlBmnksqqUkLMICRFldFDBLt7Uv8/exec?mode=w&area=333&NS=S",
        "iframeId" : "weather",
        "reloadDur": 0
      },{
        "url"      : "https://tenki.jp/map/",
        "iframeId" : "rainRadar",
        "reloadDur": 0
      },{
        "url"      : "https://weathernews.jp/s/warn/kinki.html",
        "iframeId" : "advisory",
        "reloadDur": 0
      },

    ];
  </script>
  <script>

    function loadIframe(page){
      window.open(page.url,page.iframeId);
      if(page.reloadDur > 0){
        setInterval(()=>{window.open(page.url,page.iframeId)}, page.reloadDur*1000);
      }
    }

    window.onload = function(){
      slideDur = getParam("slideDur");
      if(!slideDur) slideDur = 10;

      var mainFrames = [];

      var body = document.getElementsByTagName("body")[0];

      for(page of pages){
        let iframe  = document.createElement("iframe");
        iframe.id   = iframe.name = page.iframeId;
        iframe.className = "fullSc";
        body.appendChild(iframe);
        loadIframe(page);
        mainFrames.push(document.getElementById(page.iframeId));
      }
      
      new FullScSlider(mainFrames,slideDur,5);
    };
    
    function getParam(name) {
      let url = window.location.href;
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
  </script>
<title>always</title>
<style>
  body{
    margin:  0;
    padding: 0;
    background: #235;
  }
  iframe.fullSc{
    position: fixed;
    top: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    border:0;
  }
</style>
</head>
<body>
  <section id="main">
    <iframe class="fullSc" id="weather"   name="weather"   allowusermedia="true"></iframe>
    <iframe class="fullSc" id="rainRadar" name="rainRadar" allowusermedia="true"></iframe>
    <iframe class="fullSc" id="advisory"  name="advisory"  allowusermedia="true"></iframe>
  </section>

  <section id="trainTicker">
    <link href="./td-ticker-clock.css" rel="stylesheet" type="text/css">
    <script src="./td-ticker.js"></script>
  </section>

</body>
</html>
