<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="./fullScSlider/fullScSlider.js"></script>
  <script>
    function loadWeather(){
      window.open(
          "https://script.google.com/macros/s/AKfycbxOBOfpSsnApd0GMwPm2xCLlBmnksqqUkLMICRFldFDBLt7Uv8/exec?mode=rits"
          ,"weather");
    }
    function loadRainRadar(){
      window.open(
          "https://tenki.jp/map/"
          ,"rainRadar");
    }
    
    window.onload = function(){
      loadWeather();loadRainRadar();
      setInterval(loadWeather,1800000); // 30分ごとに更新
      
      var mainFrames = [
        document.getElementById("weather"),
        document.getElementById("rainRadar")
      ];
      
      new FullScSlider(mainFrames);
    };
  </script>
<title>always</title>
<style>
  body{
    margin:  0;
    padding: 0;
    background: #235;
  }
  iframe.fullSc{
    position: fixed;
    top: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    border:0;
  }
</style>
</head>
<body>
  <section id="main">
    <iframe class="fullSc" id="weather"  name="weather"  allowusermedia="true"></iframe>
    <iframe class="fullSc" id="rainRadar" name="rainRadar" allowusermedia="true"></iframe>
  </section>

  <section id="trainTicker">
    <style>  
      .ticker{
        position: fixed;
        bottom: 2.5vh;
        left: 1.8vw;
        height: 5.6vw;
        width: 88.2vw;
        border: none;
        overflow: hidden;
      }
      .tickerOnepoint{
        position: fixed;
        padding: 0.1vw;
        bottom: 2.5vh;
        left: 1vw;
        height: 9vw;
        width: 20vw;
        border: none;
        overflow: hidden;
        background-color: rgb(32, 64, 170);
        font-size:  2.5vw;
        font-weight: 900;
        text-align: center;
        color: #fff;
      }
      .tickerClock{
        position: fixed;
        padding: 0.1vw;
        bottom: 2.5vh;
        right:    1vw;
        height:   9vw;
        width:   8vw;
        border: none;
        overflow: hidden;
        background-color: #EEE;
        font-size:  2.5vw;
        font-weight: 900;
        text-align: center;
        color: rgb(32, 64, 170);
      }
      #tickerFrame{
        width: 110%;
        border: none;
        overflow: hidden;
      }
      .t_logo{
        height:6vw;
        line-height:3vw;
      }

    </style>
    <div class="tickerOnepoint">JR線運行情報</div>
    <div class="ticker">
      <iframe id="tickerFrame" name="tickerFrame"></iframe>
    </div>
    <div class="tickerClock">
      <div class="t_logo">現在<br>時刻</div>
      <div id="t_clock" />
    </div>
    
    <script>
      class Clock{
        constructor(clockElm){
          this.clockElm = clockElm;
          setInterval(()=>{this.updateClock();},1000);
        }
        getNowTime(){
          var nowTime = new Date();
          this.h = nowTime.getHours();
          this.m = nowTime.getMinutes();
        }
        writeClock(){
          console.log(this.h,this.m);
          this.clockElm.innerHTML = (
            `${("00" + this.h).slice(-2)}:${("00" + this.m).slice(-2)}`
          );
        }
        updateClock(){
          this.getNowTime();
          this.writeClock();
        }
      }

      function loadTrainTicker(){
        window.open(
          "https://script.google.com/macros/s/AKfycbxOBOfpSsnApd0GMwPm2xCLlBmnksqqUkLMICRFldFDBLt7Uv8/exec?mode=ticker"
          ,"tickerFrame");
      }
      loadTrainTicker();
      setInterval(loadTrainTicker,600000); // 10分ごとに更新

      var clockElm = document.getElementById("t_clock");
      new Clock(clockElm);
    </script>
  </section>

</body>
</html>
