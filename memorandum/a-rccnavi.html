<!DOCTYPE html>
  <html>
  <head>
    <style>
      @import url('https://fonts.googleapis.com/css?family=M+PLUS+1p:700&display=swap');
      body{
        background-color: #000;
        font-size: 12vw;
        font-weight: 800;
        font-family: 'M PLUS 1p', sans-serif;
      }

      img{
        height: 50vh;
        margin-top: 5vh; 
  
        filter: drop-shadow(0px 0px 50px rgba(255,255,255,1));
      }

      .l-top{
        position: fixed;
        top:  0;
        left: 0;
        width:       70vw;
        height:      70vh;
        line-height: 70vh;
        text-align: center;
        background: #000;
        z-index: 0;
        color: #FFF;
      }
      
      .l-btm{
        position: fixed;
        left:   0;
        bottom: 0;
        width:       70vw;
        height:      29vh;
        line-height: 29vh;
        text-align: center;
        background: #FFF;
        z-index: 0;
      }

      .r{
        position: fixed;
        top:    0;
        right:  0;
        width:       29.5vw;
        height:      100vh;
        line-height:  25vh;
        text-align: center;
        background: #EE0;
        z-index: 0;
      }

      #buil{
        font-size:30vw;
        transform:scale(0.7,0.5);
      }

      .l-act{
        position: fixed;
        top:    0;
        left:   0;
        width:        70vw;
        height:      100vh;
        line-height: 100vh;
        text-align: center;
        background: #000;
        color: #FFF;
        z-index: 2;
      }
      .l-act2{
        position: fixed;
        top:    0;
        left:   0;
        width:        70vw;
        height:      100vh;
        line-height: 100vh;
        text-align: center;
        background: #FFF;
        color: #000;
        z-index: 2;
      }
      #act{
        display: none;
        font-size:30vw;
      }

      
    </style>
  </head>
  <body onclick="synth.cancel(); this.parentNode.removeChild(this);">
    <div class="l-top">
      <img src="https://ritscc.github.io/formviewer/logo-w.png">
    </div>
    <div class="l-btm" id="event">
      
    </div>
    <div class="r"><br>
      <div id="buil">
          
      </div>
      <div id="room">
          
      </div>
    </div>
    
    <div class="l-act" id="act">
      移動
    </div>

    <script>
      var building = getParam("building") || "";
      var roomNum  = getParam("roomNum")  || "";
      var act      = getParam("act")      || "移動";
      var event    = getParam("event")    || "定例会議";
      var isNext   = getParam("next")     || true;
      var switchScreenTime = getParam("time") || 10;
      var roomUttr = roomNum.replace(1,"いち").replace(2,"に").replace(3,"さん").replace(4,"し").replace(5,"ご")
                            .replace(6,"ろく").replace(7,"なな").replace(8,"はち").replace(9,"きゅう").replace(0,"まる");
      
      document.getElementById("buil").innerHTML = building;
      document.getElementById("buil").style.transform = `scale(${(0.6/(building.length*0.8))},0.5)`;
      document.getElementById("buil").style.marginRight = `${(building.length-1)*10}vw`;
      document.getElementById("room" ).innerHTML = roomNum;
      document.getElementById("event").innerHTML = event;
      document.getElementById("act"  ).innerHTML = act;
      

      function showact(){
        let act = document.getElementById("act");
        if(act){
          act.style.display="block";
          if(parseInt(new Date()/1000) % 2){
            act.className = "l-act";
            speak(building + roomUttr + "、" + act);
          }else{
            act.className = "l-act2";
          }
        }
      }
      setTimeout(()=>{
        setInterval(showact,1000);
      },switchScreenTime * 1000);

      try{
        var uttr  = new SpeechSynthesisUtterance();
        var synth = window.speechSynthesis;
      }catch(e){
        console.log(e);
      }
      function speak(text){
        var text = text;
        uttr.text = text;
        uttr.lang = "ja";
        synth.speak(uttr);
      }
      var uttrStr;
      if(isNext) uttrStr = "次は、";
      else       uttrStr = "";
      uttrStr += event + "、" + act;
      speak(uttrStr);
      
      function getParam(name) {
        let url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
      }

    </script>
            
  </body>
</html>